<!DOCTYPE html>
<html>
    <head>

<script>

let action = function(e){
    alert("I work for both now!")
}

// Practicing DataBinding: 

// Defining an empty data array
let data = {
    // Insert default data here?
    // "telephone":"123"
};

let dataBind = function(){}; // Why define this empty function?

// Attaching another function to the one above which adds the input data to the empty array:
dataBind.set = function(key, value){
    data[key] = value;
};

// Using the .get command to retrieve the value associated with a specified key:
dataBind.get = function(key){
    return data[key]; // How can it output the value when we call the key?
};


dataBind.display = function(){
    document.querySelectorAll('[name], [data]').forEach(function(item){
   
        // console.log("CL Item Name - " + item.name)

        let key = item.name;
        if(key == undefined){
            key = item.getAttribute("data");
            // console.log("Item doesn't have a name...")
        } 
        
        else{
            item.value = data[item.name];
            // console.log("Item has a name!" + item.name + item.value)
        }

    });
};


window.addEventListener("load", function(){  

    // Recording the input values:

    document.querySelector('form').addEventListener("input", function(e){
        // console.log(e.target.name)

        // The following code produces equivalent functionality.
        dataBind.set(e.target.name, e.target.value);
      
    })
  

    // For submit button:

    document.querySelector('button').addEventListener("click", function(){
            alert("You have now submitted the form:");

            dataBind.display();

            // Want to write a ForEach loop to clear the input text fields....

            document.querySelectorAll('[name], [data]').forEach(function(item){

            let key = item.name;

            // Input elements will always have a name so this section helps us find the input elements to clear:
            if(key == undefined){ 
                key = item.getAttribute("data");

                // if(data[key] !== undefined){
                //     item.innerText = data[key];
                //     console.log(item.innerText);
                // }
                // console.log("A")

                console.log("Undefined")
            } 
            
            else{
                item.value = data[item.name];
                // item.value = "";
                // console.log(item.value)
            }

            item.value = "";

            });
            
            // dataBind.display();

    })

})


// Create a new feature that allows items to be added -------
</script>
   
    </head>

    <body>

        <form>

            <p>Please input your address:</p>
            <input name="address"/>
            <p>Please input your telephone number:</p>
            <input name="telephone"/>
           
        </form>

        <p>Telephone Number Response:</p>
        <textarea name="telephone"></textarea>
        <p>Address Response:</p>
        <textarea name="address"></textarea>
        <h3></h3>

        <button type="submit">Submit</button>
    </body>

</html>